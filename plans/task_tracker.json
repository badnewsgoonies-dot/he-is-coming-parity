{
  "version": 1,
  "goal": "DLC-quality replication plan for He Is Coming systems and modes",
  "task_count": 19,
  "tasks": [
    {
      "phase_id": "systems_foundation",
      "phase_intent": "Recreate the core deterministic systems that power combat and time.",
      "task_id": "map_time_system",
      "description": "Grid map, fog-of-war, day/night timeline, boss cadence, night FOV.",
      "acceptance": [
        "Movement advances timeline; night reduces visibility.",
        "Boss trigger every 3 days with forecast marker."
      ]
    },
    {
      "phase_id": "systems_foundation",
      "phase_intent": "Recreate the core deterministic systems that power combat and time.",
      "task_id": "combat_sim",
      "description": "Auto-battle with HP/Attack/Armor/Speed; speed-driven initiative.",
      "acceptance": [
        "Armor absorbs damage before HP and refreshes after battle.",
        "Speed controls attack order and extra strikes."
      ]
    },
    {
      "phase_id": "systems_foundation",
      "phase_intent": "Recreate the core deterministic systems that power combat and time.",
      "task_id": "status_engine",
      "description": "Implement Wounded, Exposed, Freeze, Thorns, Poison, Acid, Stun, Riptide.",
      "acceptance": [
        "Status triggers match conditions (Wounded <=50% HP, Exposed on first armor break).",
        "Status stacks apply and decay per rules."
      ]
    },
    {
      "phase_id": "item_and_progression",
      "phase_intent": "Recreate item triggers, upgrades, and meta-progression.",
      "task_id": "item_trigger_order",
      "description": "Slot-ordered item trigger system with battle-start/on-hit/end-turn conditions.",
      "acceptance": [
        "Items trigger in fixed slot order every battle."
      ]
    },
    {
      "phase_id": "item_and_progression",
      "phase_intent": "Recreate item triggers, upgrades, and meta-progression.",
      "task_id": "forge_edges",
      "description": "Weapon edge replacement system with stat/keyword modifiers.",
      "acceptance": [
        "Edges replace prior edge and change combat effects."
      ]
    },
    {
      "phase_id": "item_and_progression",
      "phase_intent": "Recreate item triggers, upgrades, and meta-progression.",
      "task_id": "golem_merge",
      "description": "Merge identical items into golden tier upgrades.",
      "acceptance": [
        "Two identical items produce a stronger golden version."
      ]
    },
    {
      "phase_id": "item_and_progression",
      "phase_intent": "Recreate item triggers, upgrades, and meta-progression.",
      "task_id": "compendium_grid",
      "description": "Spatial unlock grid that expands the item pool.",
      "acceptance": [
        "Completing a challenge unlocks adjacent nodes and adds items to pool."
      ]
    },
    {
      "phase_id": "world_nodes_and_utilities",
      "phase_intent": "Add run-shaping nodes and utility systems.",
      "task_id": "merchant_and_economy",
      "description": "Gold economy, merchants, and purchase flow.",
      "acceptance": [
        "Gold accrues from combat and can be spent at shops."
      ]
    },
    {
      "phase_id": "world_nodes_and_utilities",
      "phase_intent": "Add run-shaping nodes and utility systems.",
      "task_id": "campfire_and_rest",
      "description": "Campfire rest (heal 10) and time skip.",
      "acceptance": [
        "Campfire heals and advances time."
      ]
    },
    {
      "phase_id": "world_nodes_and_utilities",
      "phase_intent": "Add run-shaping nodes and utility systems.",
      "task_id": "special_nodes",
      "description": "Fairy transform, Cauldron food combining, Horse carriage travel.",
      "acceptance": [
        "Each node modifies the run state and is discoverable on the map."
      ]
    },
    {
      "phase_id": "world_nodes_and_utilities",
      "phase_intent": "Add run-shaping nodes and utility systems.",
      "task_id": "banish",
      "description": "Remove an item from the pool for the remainder of a run.",
      "acceptance": [
        "Banished items do not reappear in the same run."
      ]
    },
    {
      "phase_id": "modes",
      "phase_intent": "Implement multiplayer modes and required UI.",
      "task_id": "kingmaker_async",
      "description": "Async ladder runs vs champion builds with crown rank.",
      "acceptance": [
        "Bundle selection (3) and king duel flow are present.",
        "Rank/crown UI tracks progression.",
        "Crown gains on victory (+1) with visible crown track, thresholds, and variable target lengths."
      ]
    },
    {
      "phase_id": "modes",
      "phase_intent": "Implement multiplayer modes and required UI.",
      "task_id": "friend_battle_realtime",
      "description": "Real-time 1v1 with shared seed, lobby code, and round cadence.",
      "acceptance": [
        "Shared seed runs; map phase syncs into battle phase.",
        "Opponent inspection and post-battle summaries available."
      ]
    },
    {
      "phase_id": "dlc_content_pack",
      "phase_intent": "Deliver DLC content that integrates with all systems.",
      "task_id": "new_biome",
      "description": "New region with distinct enemies, POIs, and loot tags.",
      "acceptance": [
        "Biome-specific items and enemies appear in pool."
      ]
    },
    {
      "phase_id": "dlc_content_pack",
      "phase_intent": "Deliver DLC content that integrates with all systems.",
      "task_id": "new_boss_and_minions",
      "description": "Add 1 boss + 4-6 enemies with unique keywords.",
      "acceptance": [
        "Boss appears at correct cadence with clear counters."
      ]
    },
    {
      "phase_id": "dlc_content_pack",
      "phase_intent": "Deliver DLC content that integrates with all systems.",
      "task_id": "new_items_and_sets",
      "description": "Add 8-12 items, including a set bonus and 2 status effects.",
      "acceptance": [
        "Items integrate into compendium and bundle selection."
      ]
    },
    {
      "phase_id": "qa_validation",
      "phase_intent": "Prove determinism, balance, and mode parity.",
      "task_id": "deterministic_seed",
      "description": "Shared seed tests for friend battle parity.",
      "acceptance": [
        "Same-seed runs yield identical item rolls."
      ]
    },
    {
      "phase_id": "qa_validation",
      "phase_intent": "Prove determinism, balance, and mode parity.",
      "task_id": "trigger_order_tests",
      "description": "Regression tests for slot order and status triggers.",
      "acceptance": [
        "Slot order remains stable across patches."
      ]
    },
    {
      "phase_id": "qa_validation",
      "phase_intent": "Prove determinism, balance, and mode parity.",
      "task_id": "balance_smoke",
      "description": "Simulated runs across difficulties and regions.",
      "acceptance": [
        "Boss fights remain winnable with intended counters."
      ]
    }
  ]
}